<!DOCTYPE html>
<meta charset="utf-8">
<style>

body,
svg {
  height: 100%;
  margin: 0;
  width: 100%;
  float: left;
}
#map {
  border:2px solid #000;
  width:960px;
  height:550px;
}
path {
  fill: none;
  stroke-linejoin: round;
}

.state-boundary {
        fill: none;
        stroke: #ccc;
        stroke-width:1px;
        pointer-events: none;
}

.county {
  stroke: #ccc;
  stroke-width: 0.2px;
}

.biditem {
  stroke: black
  stroke-width: 0.2px;
  fill:black;
}


</style>
<body>
  <div id="map"><div>
<script src="js/d3.v3.min.js"></script>
<script src="js/topojson.v0.min.js"></script>
<script src="js/queue.v1.min.js"></script>

<script>

var width = 800,
    height = 500;
var counties, bid;
var countyPath,stateBoundaryPath,countyHover;
var currentSelected = "";

//var projection = albersUsa();
var projection = d3.geo.albersUsa();
var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("#map").append("svg")
   // .attr("viewBox", "0 0 " + width + " " + height)
   // .attr("width", width)
   // .attr("height", height)
     .call(d3.behavior.zoom()
      .on("zoom", redraw))
     .append("g");


queue()
    .defer(d3.json, "data/statecounty_5e6.json")
    .defer(d3.json, "data/mobility_2_bidding_items.topojson")
    .await(ready);

function ready(error, us, biditem) {
  counties = topojson.object(us, us.objects.county);
  state = topojson.object(us, us.objects.state);
  biditem = topojson.object(biditem, biditem.objects.mobility_2_bidding_items);

  stateBoundaryPath = svg.append("path")
        .datum(state)
        .attr("d", path)
        .attr("class", "state-boundary");
   countyBoundaryPath = svg.append("path")
        .datum(counties)
        .attr("d", path)
        .attr("class", "county");
   biditemPath = svg.append("path")
        .datum(biditem)
        .attr("d", path)
        .attr("class", "biditem");  

};
function redraw() {
svg.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
}


</script>